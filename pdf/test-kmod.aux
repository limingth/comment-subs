\relax 
\ifx\hyper@anchor\@undefined
\global \let \oldcontentsline\contentsline
\gdef \contentsline#1#2#3#4{\oldcontentsline{#1}{#2}{#3}}
\global \let \oldnewlabel\newlabel
\gdef \newlabel#1#2{\newlabelxx{#1}#2}
\gdef \newlabelxx#1#2#3#4#5#6{\oldnewlabel{#1}{{#2}{#3}}}
\AtEndDocument{\let \contentsline\oldcontentsline
\let \newlabel\oldnewlabel}
\else
\global \let \hyper@last\relax 
\fi

\providecommand*\HyPL@Entry[1]{}
\HyPL@Entry{0<</S/D>>}
\@writefile{toc}{\contentsline {section}{\numberline {1}kmod-11 测试案例分析}{1}{section.1}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.1}THU-12-1 编译 kmod 项目源码}{1}{subsection.1.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.1.1}下载源码包}{1}{subsubsection.1.1.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.1.2}解压源码包}{1}{subsubsection.1.1.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.1.3}编译项目源码}{2}{subsubsection.1.1.3}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.2}THU-12-2 测试 kmod 命令}{4}{subsection.1.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.2.1}运行 make install 安装命令}{4}{subsubsection.1.2.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.2.2}直接运行 kmod 命令}{5}{subsubsection.1.2.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.2.3}运行 kmod help 命令}{5}{subsubsection.1.2.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.2.4}运行 kmod list 命令}{6}{subsubsection.1.2.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.2.5}kmod-11 版本中暂时不支持 load/unload 命令}{7}{subsubsection.1.2.5}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.3}THU-12-3 测试 insmod 命令}{8}{subsection.1.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.3.1}编写测试用内核模块源码 hello.c}{8}{subsubsection.1.3.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.3.2}编写测试用内核模块的 Makefile 文件}{9}{subsubsection.1.3.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.3.3}编译内核模块 hello.ko}{9}{subsubsection.1.3.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.3.4}使用测试用工具 insmod 插入内核模块}{10}{subsubsection.1.3.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.3.5}查看插入内核模块后的打印结果}{10}{subsubsection.1.3.5}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.3.6}重复插入同样的内核模块系统会报错}{11}{subsubsection.1.3.6}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.4}THU-12-4 测试 rmmod 命令}{11}{subsection.1.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.4.1}使用测试用工具 rmmod 卸载内核模块}{11}{subsubsection.1.4.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.4.2}查看卸载内核模块后的打印结果}{11}{subsubsection.1.4.2}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.5}THU-12-5 测试 lsmod 命令}{12}{subsection.1.5}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.5.1}lsmod 命令运行}{12}{subsubsection.1.5.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.5.2}lsmod 命令运行参数}{13}{subsubsection.1.5.2}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.6}THU-12-6 测试 modinfo 命令}{14}{subsection.1.6}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.6.1}modinfo 命令运行参数}{14}{subsubsection.1.6.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.6.2}modinfo 命令检查依赖关系}{14}{subsubsection.1.6.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.6.3}查看别名信息 alias}{15}{subsubsection.1.6.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.6.4}使用 modinfo 查看各个依赖模块信息}{16}{subsubsection.1.6.4}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.7}THU-12-7 测试 depmod 命令}{17}{subsection.1.7}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.7.1}直接运行 depmod 命令}{17}{subsubsection.1.7.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.7.2}查看生成的 modules.dep 文件}{17}{subsubsection.1.7.2}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.8}THU-12-8 测试 modprobe 命令}{18}{subsection.1.8}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.8.1}直接运行 modprobe 命令，加 -l 参数查看可以加载的模块}{18}{subsubsection.1.8.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.8.2}直接运行 modprobe 命令，加 -D 参数查看依赖关系}{18}{subsubsection.1.8.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.8.3}使用 modprobe nfs 加载 nfs 内核模块和相关依赖模块}{18}{subsubsection.1.8.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.8.4}使用 modprobe -r nfs 卸载 nfs 内核模块和相关依赖模块}{19}{subsubsection.1.8.4}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.9}THU-12-9 测试 modprobe 命令参数}{19}{subsection.1.9}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.9.1}查看依赖关系 show-depends}{19}{subsubsection.1.9.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.9.2}查看配置信息 config}{20}{subsubsection.1.9.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.9.3}查看模块内部信息 show-modversions}{21}{subsubsection.1.9.3}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.10}THU-12-10 修改调试 depmod 命令}{21}{subsection.1.10}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.10.1}修改源码，插入打印函数}{21}{subsubsection.1.10.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.10.2}重新编译生成新的 depmod}{22}{subsubsection.1.10.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.10.3}再次执行 depmod，观察从标准输出的打印信息}{22}{subsubsection.1.10.3}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.11}THU-12-11 修改调试 modprobe 命令}{23}{subsection.1.11}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.1}查看 modprobe 源码}{23}{subsubsection.1.11.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.2}修改 kmod\_module\_parse\_depline 函数}{24}{subsubsection.1.11.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.3}插入130行的打印 line 的语句}{24}{subsubsection.1.11.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.4}重新编译生成新的 modprobe}{24}{subsubsection.1.11.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.5}运行 modprobe nfs}{25}{subsubsection.1.11.5}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.6}插入167行打印语句}{25}{subsubsection.1.11.6}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.7}重新编译生成新的 modprobe}{26}{subsubsection.1.11.7}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.11.8}运行 modprobe nfs}{26}{subsubsection.1.11.8}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.12}THU-12-12 编译生成 testsuite 命令集}{27}{subsection.1.12}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.12.1}make check 编译并运行集成测试}{27}{subsubsection.1.12.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.12.2}单独创建根文件系统}{30}{subsubsection.1.12.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.12.3}查看生成的 rootfs}{30}{subsubsection.1.12.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.12.4}确认没有此时 rootfs/test-init/ 下没有生成 sys 子目录}{31}{subsubsection.1.12.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.12.5}运行 test-init 命令}{31}{subsubsection.1.12.5}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.12.6}查看 rootfs/test-init/ 已经产生 sys 子目录}{31}{subsubsection.1.12.6}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.12.7}查看 initstate 文件的内容为 ``live'' 字符串}{31}{subsubsection.1.12.7}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.13}THU-12-13 编译生成 Debug 版}{32}{subsection.1.13}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.1}配置时加上 --enable-debug, --enable-logging 参数}{32}{subsubsection.1.13.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.2}make clean \&\& make 重新编译}{38}{subsubsection.1.13.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.3}设置日志优先级 KMOD\_LOG=7}{38}{subsubsection.1.13.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.4}重新运行 lsmod 命令，观察调试信息输出}{38}{subsubsection.1.13.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.5}设置日志输出级别为6}{50}{subsubsection.1.13.5}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.6}设置日志输出级别为5}{52}{subsubsection.1.13.6}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.7}insmod 命令执行流程}{53}{subsubsection.1.13.7}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.8}如果用 sudo 则必须重新传递 KMOD\_LOG=7}{54}{subsubsection.1.13.8}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.13.9}modinfo 命令}{54}{subsubsection.1.13.9}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.14}THU-12-14 测试 alias 方式加载}{55}{subsection.1.14}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.14.1}编译获得内核模块hello.ko（测试用）}{55}{subsubsection.1.14.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.14.2}编写 modprobe.conf 配置文件}{55}{subsubsection.1.14.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.14.3}此时用 modprobe 加载，失败}{56}{subsubsection.1.14.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.14.4}复制 hello.ko 到系统目录下 /lib/modules/3.2.0-29-generic-pae/}{56}{subsubsection.1.14.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.14.5}此时用 modprobe 加载，仍然失败}{56}{subsubsection.1.14.5}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.14.6}运行 depmod 命令，重新生成依赖关系}{57}{subsubsection.1.14.6}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.14.7}此时再用 modprobe 加载，终于成功}{57}{subsubsection.1.14.7}}
\@writefile{toc}{\contentsline {subsection}{\numberline {1.15}THU-12-15 测试 blacklist 方式禁止加载}{58}{subsection.1.15}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.15.1}编写 modprobe.conf 配置文件}{58}{subsubsection.1.15.1}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.15.2}重新用 modprobe 加载，失败}{58}{subsubsection.1.15.2}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.15.3}用 lsmod 查看没有加载成功}{59}{subsubsection.1.15.3}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.15.4}重新修改 modprobe.conf 配置文件}{59}{subsubsection.1.15.4}}
\@writefile{toc}{\contentsline {subsubsection}{\numberline {1.15.5}重新用 modprobe 加载，成功}{59}{subsubsection.1.15.5}}
